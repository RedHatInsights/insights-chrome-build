(self.webpackChunkinsights_chrome=self.webpackChunkinsights_chrome||[]).push([[313],{60200:(t,e,n)=>{"use strict";n.d(e,{W:()=>v,x:()=>m});var o=n(15861),r=n(87757),a=n.n(r),i=n(98670),c=n(11577),s=n(13606),u=n.n(s),l=n(9669),h=n.n(l),f=n(54998),d=n.n(f),p={};function v(){if(-1!==b().location.href.indexOf(i.ZP.offlineToken)){var t=b().location,e=t.hash,n=t.search,o=t.origin,r=t.pathname,a=new URLSearchParams(n).get(i.ZP.noAuthParam);p.postbackUrl="".concat(o).concat(r,"?").concat(i.ZP.noAuthParam,"=").concat(a).concat(e),b().location.hash="";var c=d()(b().location.href);c.removeQuery(i.ZP.noAuthParam),b().history.pushState("offlinePostback","",c.toString())}}function m(t,e){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)(a().mark((function t(e,n){var o,r,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=_(),!p.response){t.next=3;break}return t.abrupt("return",Promise.resolve(p.response));case 3:if(o){t.next=5;break}return t.abrupt("return",Promise.reject("not available"));case 5:return t.next=7,u()(c.DEFAULT_ROUTES);case 7:return r=t.sent,i="".concat(r,"/realms/").concat(e,"/protocol/openid-connect/token"),s=k(o),t.abrupt("return",h().post(i,w(g(o,n,s.code)),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return p.response=t,t})));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return window}function _(){var t=p.postbackUrl;return delete p.postbackUrl,t}function g(t,e,n){return{code:n,grant_type:"authorization_code",client_id:e,redirect_uri:encodeURIComponent(t.split("#")[0])}}function k(t){return t.split("#")[1].split("&").reduce((function(t,e){var n=e.split("=");return t[n[0]]=n[1],t}),{})}function w(t){return Object.entries(t).map((function(t){return"".concat(t[0],"=").concat(t[1])})).join("&")}},30701:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o=""},44057:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(21472)),a=function(){function t(){this._cookie,this._keycloak={}}return t.prototype.setCookie=function(t){this.cookie=t},t.prototype.setKeycloak=function(t,e,n,o){this._keycloak=(0,r.default)(t),this._keycloak.onTokenExpired=e,this._keycloak.onAuthSuccess=n,this._keycloak.onAuthRefreshSuccess=o},t.prototype.initializeKeycloak=function(t){var e;null===(e=this._keycloak)||void 0===e||e.init(t)},t.prototype.setToken=function(t){this._keycloak.authenticated=!0,this._keycloak.token=t},t.prototype.initialize=function(t){return this._keycloak.init(t)},t.prototype.setTokenParsed=function(t){this._keycloak.tokenParsed=t},t.prototype.getTokenParsed=function(){return this._keycloak.tokenParsed},t.prototype.getToken=function(){return this._keycloak.token},t.prototype.getRefershToken=function(){return this._keycloak.refreshToken},t.prototype.login=function(t){return this._keycloak.login(t)},t.prototype.clearToken=function(){this._keycloak.clearToken()},t.prototype.getCookie=function(){return this.cookie},t.prototype.logout=function(t){return this._keycloak.logout(t)},t.prototype.getAuthenticated=function(){return this._keycloak.authenticated},t.prototype.updateToken=function(){return this._keycloak.updateToken(5)},t}();e.default=a},11577:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.offlineToken=e.noAuthParam=e.options=e.DEFAULT_ROUTES=void 0,e.DEFAULT_ROUTES={prod:{url:["access.redhat.com","prod.foo.redhat.com","cloud.redhat.com","console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},qa:{url:["qa.foo.redhat.com","qa.cloud.redhat.com","qa.console.redhat.com"],sso:"https://sso.qa.redhat.com/auth",portal:"https://access.qa.redhat.com"},ci:{url:["ci.foo.redhat.com","ci.cloud.redhat.com","ci.console.redhat.com"],sso:"https://sso.qa.redhat.com/auth",portal:"https://access.qa.redhat.com"},qaprodauth:{url:["qaprodauth.foo.redhat.com","qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},stage:{url:["stage.foo.redhat.com","cloud.stage.redhat.com","console.stage.redhat.com","fetest.stage.redhat.com"],sso:"https://sso.stage.redhat.com/auth",portal:"https://access.stage.redhat.com"},gov:{url:["gov.cloud.redhat.com","gov.console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},govStage:{url:["gov.cloud.stage.redhat.com","gov.console.stage.redhat.com"],sso:"https://sso.stage.redhat.com/auth",portal:"https://access.redhat.com"},dev:{url:["console.dev.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"}},e.options={realm:"redhat-external",clientId:"cloud-services",cookieName:"cs_jwt"},e.noAuthParam="noauth",e.offlineToken="2402500adeacc30eb5c5a8a5e2e0ec1f"},88377:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(9669)),a=n(49268),i=n(35755),c=n(28997),s="/api/entitlements/v1";e.default=function(t){var e=(0,c.bootstrapCache)(s,"".concat(t,"-entitlements")),n=r.default.create({adapter:e.adapter});return n.interceptors.response.use((function(t){if(t&&t.request&&!0!==t.request.fromCache){var e=(0,i.lastActive)("/api/entitlements/v1/services","fallback"),n=Object.keys(localStorage).filter((function(t){return t.endsWith("/api/entitlements/v1/services")&&t!==e}));(0,i.deleteLocalStorageItems)(n)}return t.data||t})),new a.ServicesApi(void 0,s,n)}},13606:function(t,e,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{s(o.next(t))}catch(t){a(t)}}function c(t){try{s(o.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=(0,s(n(18579)).default)("insights/url.js"),l=Promise.resolve().then((function(){return a(n(30701))})).then((function(t){return t.default}));e.default=function(t){return i(void 0,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return[4,l];case 1:return n.sent()?(u("Using dynamic SSO_URL found! "+l),[2,l]):(e=Object.entries(t).find((function(t){return t[1].url.includes(location.hostname)})))?(u("SSO Url: ".concat(null==e?void 0:e[1].sso)),u("Current env: ".concat(null==e?void 0:e[0])),[2,null==e?void 0:e[1].sso]):(u("SSO url: not found, defaulting to qa"),u("Current env: not found, defaultint to qa"),[2,"https://sso.qa.redhat.com/auth"])}}))}))}},69083:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{s(o.next(t))}catch(t){a(t)}}function c(t){try{s(o.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.tryBounceIfUnentitled=e.buildUser=void 0;var c=n(35755),s=i(n(88377)),u=(0,i(n(18579)).default)("insights/user.js"),l={"cost-management":"cost_management",insights:"insights",openshift:"openshift",migrations:"migrations",ansible:"ansible",subscriptions:"subscriptions",settings:"settings","user-preferences":"user_preferences",internal:"internal"};function h(){return window}function f(t){return t?{identity:o(o({account_number:t.account_number,type:t.type},t.idp&&{idp:t.idp}),{user:{username:t.username,email:t.email,first_name:t.first_name,last_name:t.last_name,is_active:t.is_active,is_org_admin:t.is_org_admin,is_internal:t.is_internal,locale:t.locale},internal:{org_id:t.org_id,account_id:t.account_id}})}:null}function d(t,e){var n;if("insights"===e||"openshift"===e||"cost-management"===e||"migrations"===e||"ansible"===e||"subscriptions"===e||"settings"===e||"user-preferences"===e||"internal"===e){var o=l[e],r=function(t,e){return{ansible:"".concat(document.baseURI).concat((0,c.isBeta)()?"beta/":"","ansible/ansible-dashboard/trial")}[t]||"".concat(document.baseURI,"?not_entitled=").concat(e)}(e,o);!0===t&&h().location.replace(r),e&&"object"==typeof t&&((null===(n=null==t?void 0:t[o])||void 0===n?void 0:n.is_entitled)?u("Entitled to: ".concat(o)):(u("Not entitled to: ".concat(o)),h().location.replace(r)))}}e.buildUser=f,e.tryBounceIfUnentitled=d,e.default=function(t){return r(void 0,void 0,void 0,(function(){var e,n,r;return a(this,(function(a){switch(a.label){case 0:if(e=f(t),(n=h().location.pathname.split("/")).shift(),"beta"===n[0]&&n.shift(),"subscriptions"!==(null==n?void 0:n[1])&&"cost-management"!==(null==n?void 0:n[1])||n.shift(),!e)return[3,7];u("Account Number: ".concat(e.identity.account_number)),r=void 0,a.label=1;case 1:return a.trys.push([1,5,,6]),e.identity.account_number?[4,(0,s.default)(t.jti).servicesGet()]:[3,3];case 2:return r=a.sent(),[3,4];case 3:console.log("Cannot call entitlements API, no account number"),a.label=4;case 4:return[3,6];case 5:return a.sent(),[3,6];case 6:return(0,c.pageAllowsUnentitled)()?[2,o(o({},e),{entitlements:r||{}})]:(0,c.isValidAccountNumber)(e.identity.account_number)?(d(r,n[0]),[2,o(o({},e),{entitlements:r})]):(d(!0,n[0]),[2]);case 7:u("User not ready"),a.label=8;case 8:return[2]}}))}))}},28997:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{s(o.next(t))}catch(t){a(t)}}function c(t){try{s(o.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CacheAdapter=e.bootstrapCache=e.createCacheStore=void 0;var c,s=n(35974),u=i(n(69483)),l=n(35755);e.createCacheStore=function(t,e){var n=(0,l.lastActive)(t,e);return u.default.createInstance({driver:[u.default.LOCALSTORAGE],name:"string"==typeof n?null==n?void 0:n.split("/")[0]:n.expires.split("/")[0]})},e.bootstrapCache=function(t,n){var o=(0,e.createCacheStore)(t,n);return(0,s.setupCache)({store:o,maxAge:6e5})};var h=function(){function t(t,n,o){var r,a;if(void 0===o&&(o=6e5),this.maxAge=o,this.expires=(new Date).getTime()+this.maxAge,r=window.insights.chrome.isBeta()?"beta":"non-beta",(a=localStorage.getItem("chrome:prevEnv"))&&r!==a&&(0,l.deleteLocalStorageItems)(Object.keys(localStorage).filter((function(t){return t.endsWith("/chrome-store")}))),localStorage.setItem("chrome:prevEnv",r),!c){var i=(0,l.lastActive)(t,n),s=void 0,u="string"==typeof i?i:i.expires;try{s=JSON.parse(localStorage.getItem(u)||"")}catch(t){s=localStorage.getItem(u)}if(this.name=u,this.endpoint=t,this.cacheKey=n,c=(0,e.createCacheStore)(t,n),new Date(parseInt(null==s?void 0:s.expires,10))>=new Date)this.setCache(parseInt(null==s?void 0:s.expires,10),null==s?void 0:s.data);else{var h=(new Date).getTime()+this.maxAge;this.setCache(h,{})}}}return t.prototype.setCache=function(t,e){return r(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.expires=t,this.endpoint?[4,c.setItem(this.endpoint,{data:e,expires:t})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.invalidateStore=function(){return r(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return new Date(this.expires)<=new Date?((0,l.deleteLocalStorageItems)(Object.keys(localStorage).filter((function(t){return t.endsWith("/chrome")}))),[4,u.default.dropInstance()]):[3,3];case 1:return n.sent(),this.endpoint&&this.cacheKey?(c=(0,e.createCacheStore)(this.endpoint,this.cacheKey),t=(new Date).getTime()+this.maxAge,[4,this.setCache(t,{})]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.setItem=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return[4,this.invalidateStore()];case 1:return a.sent(),this.endpoint?[4,c.getItem(this.endpoint)]:[3,4];case 2:return null!=(n=a.sent())&&(n.data=o(o({},null==n?void 0:n.data),((r={})[t]=e,r))),[4,c.setItem(this.endpoint,n)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},t.prototype.getItem=function(t){var e;return r(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.invalidateStore()];case 1:return o.sent(),this.endpoint?[4,c.getItem(this.endpoint)]:[3,3];case 2:return n=o.sent(),[2,null===(e=null==n?void 0:n.data)||void 0===e?void 0:e[t]];case 3:return[2,Promise.resolve()]}}))}))},t}();e.CacheAdapter=h},199:()=>{}}]);