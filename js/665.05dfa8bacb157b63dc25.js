"use strict";(self.webpackChunkinsights_chrome=self.webpackChunkinsights_chrome||[]).push([[665],{89850:(e,t,n)=>{n.d(t,{sL:()=>v,$3:()=>m,RK:()=>b});var r=n(71002),o=n(89062),a=n(45987),c=n(93324),i=n(4942),s=(n(87757),n(74624),n(23911),n(57557),n(94654)),u=n.n(s),l=n(88306),d=n.n(l),p=n(97704);n(53374),n(38181);function f(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v="chrome:global-filter",m="/api/inventory/v1",y=function(e){return e.replace(/\//gi,"%2F").replace(/=/gi,"%3D")},b=d()((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.Workloads,i=e[p.YF],s=(0,a.Z)(e,["Workloads",p.YF].map(f)),l=u()(Object.entries(g(g({},s),!n&&{Workloads:r})||{}),(function(e){var n=(0,c.Z)(e,2),r=n[0],o=n[1];return Object.entries(o||{}).filter((function(e){return(0,c.Z)(e,2)[1].isSelected})).map((function(e){var n=(0,c.Z)(e,2),o=n[0],a=n[1],i=a.item,s=a.value;return"".concat(r?"".concat(t?encodeURIComponent(y(r)):y(r),"/"):"").concat(t?encodeURIComponent(y((null==i?void 0:i.tagKey)||o)):y((null==i?void 0:i.tagKey)||o)).concat(null!=i&&i.tagValue||s?"=".concat(t?encodeURIComponent(y((null==i?void 0:i.tagValue)||s)):y((null==i?void 0:i.tagValue)||s)):"")}))}));return n?[r,Object.entries(i||{}).filter((function(e){return(0,c.Z)(e,2)[1].isSelected})).reduce((function(e,t){var n=(0,c.Z)(t,1)[0];return[].concat((0,o.Z)(e),[n])}),[]),l]:l}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return"".concat(Object.entries(e).map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return"".concat(n,".").concat(Object.entries(r||{}).filter((function(e){return(0,c.Z)(e,2)[1].isSelected})).map((function(e){return(0,c.Z)(e,1)[0]})).join(""))})).join(",")).concat(t?"_encode":"").concat(n?"_format":"")}))},45169:(e,t,n)=>{n.d(t,{Ys:()=>g,oG:()=>v,tx:()=>m});var r=n(71002),o=n(4942),a=n(93324),c=n(77460),i=n(89850),s=n(68004);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=new s.TagsApi(void 0,i.$3,c.ZP),p=new s.SapSystemApi(void 0,i.$3,c.ZP),f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filter",c=arguments.length>2?arguments[2]:void 0;return Object.entries(t||{}).reduce((function(t,i){var s=(0,a.Z)(i,2),u=s[0],d=s[1],p="".concat(n||"","[").concat(u,"]").concat(Array.isArray(d)?"".concat(null!=c&&c.arrayEnhancer?"[".concat(c.arrayEnhancer,"]"):"","[]"):"");return d instanceof Function||d instanceof Date?t:l(l({},t),Array.isArray(d)||"object"!==(0,r.Z)(d)?(0,o.Z)({},p,d):e(d,p,c))}),{})},h=function(e,t){var n;return{system_profile:l(l({},(null==e||null===(n=e.SAP)||void 0===n?void 0:n.isSelected)&&{sap_system:!0}),{},{sap_sids:t})}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,n=e.activeTags,r=e.registeredWith,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,i.RK)(n,!1,!0),s=(0,a.Z)(c,3),u=s[0],l=s[1],p=s[2];return d.apiTagGetTags(p,"tag","ASC",o&&o.perPage||10,o&&o.page||1,void 0,t,r,void 0,{query:f(h(u,l))})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,n=e.activeTags,r=e.registeredWith,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,i.RK)(n,!1,!0),s=(0,a.Z)(c,3),u=s[0],l=s[1],d=s[2];return p.apiSystemProfileGetSapSids(t,d,o&&o.perPage||10,o&&o.page||1,void 0,r,void 0,{query:f(h(u,l))})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.activeTags,n=e.registeredWith,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,i.RK)(t,!1,!0),c=(0,a.Z)(o,3),s=c[0],u=c[1],l=c[2];return p.apiSystemProfileGetSapSystem(l,r&&r.perPage||10,r&&r.page||1,void 0,n,void 0,{query:f(h(s,u))})}},98670:(e,t,n)=>{n.d(t,{F1:()=>j,bS:()=>P,ZP:()=>_});var r=n(45987),o=n(4942),a=n(93324),c=n(15861),i=n(87757),s=n.n(i),u=n(77460),l=n(27361),d=n.n(l),p=n(41609),f=n.n(p),h=(n(31955),["url","method","accessor","matcher"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,y,b,O,k,w,j="chrome:cross-account-requests:pending:count",P="chrome:cross-account-requests:pending:data",Z={isEmpty:f(),isNotEmpty:function(e){return!f()(e)}},S=function(e,t){var n=Z[t];return"function"==typeof n?n(e):e};w=(0,c.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return t=e.sent,e.prev=3,e.abrupt("return",t.identity.user.is_org_admin);case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[3,7]])}))),k=(0,c.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return t=e.sent,e.prev=3,e.abrupt("return",t.identity.user.is_active);case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[3,7]])}))),O=(0,c.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return t=e.sent,e.prev=3,e.abrupt("return",t.identity.user.is_internal);case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[3,7]])}))),b=(0,c.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return n=e.sent,r=(n||{}).entitlements,e.abrupt("return",n.entitlements&&t?Boolean(r[t]&&r[t].is_entitled):Object.entries(r||{}).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],c=n[1].is_entitled;return v(v({},e),{},(0,o.Z)({},r,c))}),{}));case 5:case"end":return e.stop()}}),e)}))),y=(0,c.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return r=e.sent,o=(r||{}).identity.user,e.abrupt("return",null==o||null===(n=o.email)||void 0===n?void 0:n.includes(t));case 5:case"end":return e.stop()}}),e)}))),m=(0,c.Z)(s().mark((function e(t){var n,o,a,c,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,o=t.method,a=void 0===o?"GET":o,c=t.accessor,i=t.matcher,l=(0,r.Z)(t,h),e.next=3,insights.chrome.auth.getUser();case 3:if(!e.sent.identity.account_number){e.next=8;break}return e.abrupt("return",(0,u.ZP)(v({url:n,method:a},l)).then((function(e){return S(c?d()(e||{},c):e,i)})).catch((function(){return console.log("Unable to retrieve visibility result",{visibilityMethod:"apiRequest",method:a,url:n}),!1})));case 8:return console.log("Unable to call API, no account number"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));const _=Object.freeze({noAuthParam:"noauth",offlineToken:"2402500adeacc30eb5c5a8a5e2e0ec1f"})},53750:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(15671),o=n(43144),a=n(21472),c=n.n(a);const i=function(){function e(){(0,r.Z)(this,e),this._cookie,this._keycloak}return(0,o.Z)(e,[{key:"setCookie",value:function(e){this.cookie=e}},{key:"setKeycloak",value:function(e,t,n,r){this._keycloak=c()(e),this._keycloak.onTokenExpired=t,this._keycloak.onAuthSuccess=n,this._keycloak.onAuthRefreshSuccess=r}},{key:"initializeKeycloak",value:function(e){this._keycloak.init(e)}},{key:"setToken",value:function(e){this._keycloak.authenticated=!0,this._keycloak.token=e}},{key:"initialize",value:function(e){return this._keycloak.init(e)}},{key:"setTokenParsed",value:function(e){this._keycloak.tokenParsed=e}},{key:"getTokenParsed",value:function(){return this._keycloak.tokenParsed}},{key:"getToken",value:function(){return this._keycloak.token}},{key:"getRefershToken",value:function(){this._keycloak.refreshToken}},{key:"login",value:function(e){return this._keycloak.login(e)}},{key:"clearToken",value:function(){this._keycloak.clearToken()}},{key:"getCookie",value:function(){return this.cookie}},{key:"logout",value:function(e){return this._keycloak.logout(e)}},{key:"getAuthenticated",value:function(){return this._keycloak.authenticated}},{key:"updateToken",value:function(){return this._keycloak.updateToken()}}]),e}()},11972:(e,t,n)=>{n.d(t,{wM:()=>r,YM:()=>o});var r={prod:{url:["access.redhat.com","prod.foo.redhat.com","cloud.redhat.com","console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},qa:{url:["qa.foo.redhat.com","qa.cloud.redhat.com","qa.console.redhat.com"],sso:"https://sso.qa.redhat.com/auth",portal:"https://access.qa.redhat.com"},ci:{url:["ci.foo.redhat.com","ci.cloud.redhat.com","ci.console.redhat.com"],sso:"https://sso.qa.redhat.com/auth",portal:"https://access.qa.redhat.com"},qaprodauth:{url:["qaprodauth.foo.redhat.com","qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},stage:{url:["stage.foo.redhat.com","cloud.stage.redhat.com","console.stage.redhat.com"],sso:"https://sso.stage.redhat.com/auth",portal:"https://access.stage.redhat.com"},gov:{url:["gov.cloud.redhat.com","gov.console.redhat.com"],sso:"https://sso.redhat.com/auth",portal:"https://access.redhat.com"},govStage:{url:["gov.cloud.stage.redhat.com","gov.console.stage.redhat.com"],sso:"https://sso.stage.redhat.com/auth",portal:"https://access.redhat.com"}},o={realm:"redhat-external",clientId:"cloud-services",cookieName:"cs_jwt"}},12008:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(9669),o=n.n(r),a=n(49268),c=n(74624),i="/api/entitlements/v1";const s=function(e){var t=(0,c.h4)(i,"".concat(e,"-entitlements")),n=o().create({adapter:t.adapter});return n.interceptors.response.use((function(e){if(e&&e.request&&!0!==e.request.fromCache){var t=(0,c.Qn)("/api/entitlements/v1/services","fallback"),n=Object.keys(localStorage).filter((function(e){return e.endsWith("/api/entitlements/v1/services")&&e!==t}));(0,c.gB)(n)}return e.data||e})),new a.ServicesApi(void 0,i,n)}},60200:(e,t,n)=>{n.d(t,{W:()=>d,x:()=>p});var r=n(98670),o=n(11972),a=n(35379),c=n(9669),i=n.n(c),s=n(54998),u=n.n(s),l={};function d(){if(-1!==f().location.href.indexOf(r.ZP.offlineToken)){var e=f().location,t=e.hash,n=e.search,o=e.origin,a=e.pathname,c=new URLSearchParams(n).get(r.ZP.noAuthParam);l.postbackUrl="".concat(o).concat(a,"?").concat(r.ZP.noAuthParam,"=").concat(c).concat(t),f().location.hash="";var i=u()(f().location.href);i.removeQuery(r.ZP.noAuthParam),f().history.pushState("offlinePostback","",i.toString())}}function p(e,t){var n,r=(n=l.postbackUrl,delete l.postbackUrl,n);if(l.response)return Promise.resolve(l.response);if(!r)return Promise.reject("not available");var c,s="".concat((0,a.Z)(o.wM),"/realms/").concat(e,"/protocol/openid-connect/token"),u=r.split("#")[1].split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{});return i()({method:"post",url:s,data:(c=h(r,t,u.code),Object.entries(c).map((function(e){return"".concat(e[0],"=").concat(e[1])})).join("&")),config:{headers:{"Content-Type":"application/x-www-form-urlencoded"}}}).then((function(e){return l.response=e,e}))}function f(){return window}function h(e,t,n){return{code:n,grant_type:"authorization_code",client_id:t,redirect_uri:encodeURIComponent(e.split("#")[0])}}},35379:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(93324),o=(0,n(82389).Z)("insights/url.js");const a=function(e){if(window.SSO_URL)return o("Env SSO_URL found! ",window.SSO_URL),window.SSO_URL;var t=Object.entries(e).find((function(e){return(0,r.Z)(e,2)[1].url.includes(location.hostname)}));return t?(o("SSO Url: ".concat(null==t?void 0:t[1].sso)),o("Current env: ".concat(null==t?void 0:t[0])),null==t?void 0:t[1].sso):(o("SSO url: not found, defaulting to qa"),o("Current env: not found, defaultint to qa"),"https://sso.qa.redhat.com/auth")}},85146:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(15861),o=n(4942),a=n(87757),c=n.n(a),i=n(74624),s=n(12008);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,n(82389).Z)("insights/user.js"),p={"cost-management":"cost_management",insights:"insights",openshift:"openshift",migrations:"migrations",ansible:"ansible",subscriptions:"subscriptions",settings:"settings","user-preferences":"user_preferences",internal:"internal"};function f(){return window}function h(e){return e?{identity:l(l({account_number:e.account_number,type:e.type},e.idp&&{idp:e.idp}),{},{user:{username:e.username,email:e.email,first_name:e.first_name,last_name:e.last_name,is_active:e.is_active,is_org_admin:e.is_org_admin,is_internal:e.is_internal,locale:e.locale},internal:{org_id:e.org_id,account_id:e.account_id}})}:null}function g(e,t){if("insights"===t||"openshift"===t||"cost-management"===t||"migrations"===t||"ansible"===t||"subscriptions"===t||"settings"===t||"user-preferences"===t||"internal"===t){var n,r=p[t];if(!0===e&&f().location.replace("".concat(document.baseURI,"?not_entitled=").concat(r)),t&&""!==t)null!=e&&null!==(n=e[r])&&void 0!==n&&n.is_entitled?d("Entitled to: ".concat(r)):(d("Not entitled to: ".concat(r)),f().location.replace("".concat(document.baseURI,"?not_entitled=").concat(r)))}}const v=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h(t),(r=f().location.pathname.split("/")).shift(),"beta"===r[0]&&r.shift(),"subscriptions"!==(null==r?void 0:r[1])&&"cost-management"!==(null==r?void 0:r[1])||r.shift(),!n){e.next=28;break}if(d("Account Number: ".concat(n.identity.account_number)),e.prev=7,!n.identity.account_number){e.next=14;break}return e.next=11,(0,s.Z)(t.jti).servicesGet();case 11:o=e.sent,e.next=15;break;case 14:console.log("Cannot call entitlements API, no account number");case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(7);case 19:if(!(0,i.$s)()){e.next=21;break}return e.abrupt("return",l(l({},n),{},{entitlements:o||{}}));case 21:if((0,i.iB)(n.identity.account_number)){e.next=24;break}return g(!0,r[0]),e.abrupt("return");case 24:return g(o,r[0]),e.abrupt("return",l(l({},n),{},{entitlements:o}));case 28:d("User not ready");case 29:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},23911:(e,t,n)=>{n.r(t),n.d(t,{decodeToken:()=>P,doOffline:()=>Z,init:()=>S,login:()=>D,logoutAllTabs:()=>E,getUserInfo:()=>L,isAuthenticated:()=>N,expiredToken:()=>q,getEncodedToken:()=>C,getUrl:()=>M});var r=n(4942),o=n(21472),a=n.n(o),c=n(87728),i=n(31955),s=n(74624),u=n(39666),l=n(89850),d=n(82389),p=n(35379),f=n(85146),h=n(54998),g=n.n(h),v=n(11972),m=n(53750);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,d.Z)("jwt.js"),k="cs_jwt",w=new m.Z,j=new c.g0("auth");function P(e){switch((e=(e=(e=e.split(".")[1]).replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Invalid token"}return e=(e=(e+"===").slice(0,e.length+e.length%4)).replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(escape(atob(e))),e=JSON.parse(e)}j.onmessage=function(e){if(e&&e.data&&e.data.type)switch(O("BroadcastChannel, Received event : ".concat(e.data.type)),e.data.type){case"logout":return I();case"login":return D();case"refresh":return U()}};var Z=function(e,t){var n=g()(window.location.href);n.removeSearch(e),n.addSearch(e,t);var r=b(b({},v.YM),{},{promiseType:"native",redirectUri:n.toString(),url:(0,p.Z)(v.wM)}),o=a()(r);o.init(r).then((function(){o.login({scope:"offline_access"})}))},S=function(e){O("Initializing");var t=e.cookieName?e.cookieName:k;w.setCookie({cookieName:t}),e.url=(0,p.Z)(e.routes?e.routes:v.wM),e.clientId="cloud-services",e.realm="redhat-external",e.promiseType="native",e.onLoad="check-sso",e.checkLoginIframe=!1;var n="beta"===window.location.pathname.split("/")[1]?"/beta":"";if(e.silentCheckSsoRedirectUri="https://".concat(window.location.host).concat(n,"/apps/chrome/silent-check-sso.html"),window.localStorage&&"true"===window.localStorage.getItem("chrome:jwt:shortSession")&&(e.realm="short-session"),w.setKeycloak(e,U,A,R),e.token){if(_(e.token))return w.initializeKeycloak(e),new Promise((function(t){w.setToken(e.token),t()}));delete e.token}return w.initialize(e).then(T).catch(x)};function _(e){O("Checking validity of existing JWT");try{if(!e)return!1;var t=P(e);if(!t.exp)return!1;var n=Date.now().toString().substr(0,10),r=t.exp-n;return O("Token expires in ".concat(r)),r>90?(w.setTokenParsed(t),!0):(O(r>0?"token is expiring in < 90 seconds":"token is expired"),!1)}catch(e){return O(e),!1}}function T(){var e;O("JWT Initialized"),F(w.getToken()),e=w.getRefershToken(),O("Setting the refresh token"),i.Z.set("cs_jwt_refresh",e,{secure:!0})}function x(){O("JWT init error"),I()}function D(){return O("Logging in"),i.Z.set("cs_loggedOut","false"),w.login({redirectUri:location.href})}function I(e){O("Logging out"),w.clearToken(),i.Z.remove(w.getCookie().cookieName),i.Z.remove("cs_demo");var t="beta"===window.location.pathname.split("/")[1]?"/beta":"",n=Object.keys(localStorage).filter((function(e){return e.endsWith("/api/entitlements/v1/services")||e.endsWith("/chrome")||e.endsWith("/chrome-store")||e.startsWith("kc-callback")||e.startsWith(l.sL)}));if((0,s.gB)(n),e){var r=new Date((new Date).getTime()+8e3);i.Z.set("cs_loggedOut","true",{expires:r}),w.logout({redirectUri:"https://".concat(window.location.host).concat(t)})}}var E=function(e){j.postMessage({type:"logout"}),I(e)};function A(){j.postMessage({type:"login"})}var L=function(){O("Getting User Information");var e=i.Z.get(k);return e&&_(e)&&_(w.getToken())?(0,f.Z)(w.getTokenParsed()):U().then((function(){(0,f.Z)(w.getTokenParsed()),O("Successfully updated token")})).catch((function(){if((0,s.hM)())return O("Trying to log in user to refresh token"),D()}))},N=function(){return O("User Ready: ".concat(w.getAuthenticated())),w.getAuthenticated()},q=function(){O("Token has expired, trying to log out"),I()};function R(){F(w.getToken()),j.postMessage({type:"refresh"})}function U(){return w.updateToken().then((function(e){F(w.getToken()),O("Attempting to update token"),O(e?"Token was successfully refreshed":"Token is still valid, not updating")})).catch((function(e){O(e),u.Tb(e),O("Token updated failed, trying to reauth"),D()}))}function F(e){var t,n,r;O("Setting the cs_jwt cookie"),e&&e.length>10&&(t="".concat(w.getCookie().cookieName,"=").concat(e,";")+"path=/;secure=true;"+"expires=".concat((n=P(e).exp,(r=new Date(0)).setUTCSeconds(n),r.toGMTString())),document.cookie=t)}var C=function(){return O("Trying to get the encoded token"),_(w.getToken())||(O("Failed to get encoded token, trying to update"),U()),w.getToken()},M=function(){return(0,p.Z)(v.wM)}},82389:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return function(t){window.console&&window.localStorage&&window.localStorage.getItem("chrome:jwt:debug")&&window.console.log("[JWT][".concat(e,"] ").concat(t))}}},41665:(e,t,n)=>{n.r(t),n.d(t,{initChromeAuth:()=>p,default:()=>f});var r=n(4942),o=n(60200),a=n(23911),c=n(31955),i=n(11972);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l="[JWT][jwt.js] Auth time";function d(){a.isAuthenticated()||(c.Z.remove(i.YM.cookieName),a.login()),console.timeEnd(l)}var p=function(){console.time(l);var e=u({},i.YM);(0,o.W)();var t=c.Z.get(e.cookieName),n=c.Z.get("cs_jwt_refresh");return t&&t.length>10&&n&&n.length>10&&(e.refreshToken=n,e.token=t),{initPromise:a.init(e).then(d)}};const f=function(){var e=u({},i.YM);return u({getOfflineToken:function(){return(0,o.x)(e.realm,e.clientId)}},a)}},53374:(e,t,n)=>{var r=n(38181),o=n(43541),a=n(18546),c=n(34879),i=n(94500),s=n.n(i),u=n(41860),l=[];window&&"true"===window.localStorage.getItem("chrome:redux:debug")&&l.push(s());var d=new c.Z,p=new a.ZP({chrome:{navigation:{},accessRequests:{count:0,data:[]}}},[u.ZP,d.getMiddleware()].concat(l));p.register((0,o.Z)());var f=p.getStore();(0,a.vj)(r,f)},60206:(e,t,n)=>{n.d(t,{bc:()=>r,v_:()=>o,aB:()=>a,Jx:()=>c,EI:()=>i,vj:()=>s,Fi:()=>u,gn:()=>l,n6:()=>d,aZ:()=>p,YE:()=>f,oY:()=>h,RL:()=>g,Ei:()=>v,Sz:()=>m,Of:()=>y,nN:()=>b,uN:()=>O,Wu:()=>k,yH:()=>w,OT:()=>j,N9:()=>P});var r="@@chrome/user-login",o="@@chrome/app-nav-click",a="@@chrome/app-page-action",c="@@chrome/app-object-id",i="@@chrome/get-all-tags",s="@@chrome/get-all-sids",u="@@chrome/get-all-workloads",l="@@chrome/set-global-filter-scope",d="@@chrome/global-filter-update",p="@@chrome/global-filter-toggle",f="@@chrome/global-filter-remove",h="@@chrome/register-async-module",g="@@chrome/context-switcher-toggle",v="@@chrome/load-navigation-landing-page",m="@@chrome/load-navigation-segment",y="@@chrome/load-modules-schema",b="@@chrome/change-active-module",O="@@chrome/set-pendo-feedback-flag",k="@@chrome/toggle-feedback-modal",w="@@chrome/update-access-requests-notifications",j="@@chrome/mark-request-notification-seen",P="@@chrome/store-initial-hash"},38181:(e,t,n)=>{n.r(t),n.d(t,{userLogIn:()=>s,appNavClick:()=>u,appAction:()=>l,appObjectId:()=>d,fetchAllTags:()=>p,fetchAllSIDs:()=>f,fetchAllWorkloads:()=>h,globalFilterScope:()=>g,globalFilterChange:()=>v,toggleGlobalFilter:()=>m,removeGlobalFilter:()=>y,registerModule:()=>b,onToggleContextSwitcher:()=>O,loadNavigationLandingPage:()=>k,loadLeftNavSegment:()=>w,loadModuesSchema:()=>j,changeActiveModule:()=>P,onToggle:()=>Z,setPendoFeedbackFlag:()=>S,toggleFeedbackModal:()=>_,updateAccessRequestsNotifications:()=>T,markAccessRequestNotification:()=>x,storeInitialHash:()=>D});var r=n(4942),o=n(60206),a=n(45169);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return{type:o.bc,payload:e}}function u(e,t){return{type:o.v_,payload:i(i({},e||{}),{},{id:e&&e.id,event:t})}}function l(e){return{type:o.aB,payload:e}}function d(e){return{type:o.Jx,payload:e}}function p(e,t){return{type:o.EI,payload:(0,a.Ys)(e,t)}}function f(e,t){return{type:o.vj,payload:(0,a.oG)(e,t)}}function h(e,t){return{type:o.Fi,payload:(0,a.tx)(e,t)}}function g(e){return{type:o.gn,payload:e}}function v(e){return{type:o.n6,payload:e}}function m(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:o.aZ,payload:{isHidden:e}}}function y(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:o.YE,payload:{isHidden:e}}}function b(e,t){if(!e)throw new Error("unknown module identifier: ".concat(e));return{type:o.oY,payload:{module:e,manifest:t}}}var O=function(){return{type:o.RL}},k=function(e){return{type:o.Ei,payload:e}},w=function(e,t){return{type:o.Sz,payload:{segment:t,schema:e}}},j=function(e){return{type:o.Of,payload:{schema:e}}},P=function(e){return{type:o.nN,payload:e}},Z=function(){return{type:"NAVIGATION_TOGGLE"}},S=function(e){return{type:o.uN,payload:e}},_=function(e){return{type:o.Wu,payload:e}},T=function(e){return{type:o.yH,payload:e}},x=function(e){return{type:o.OT,payload:e}},D=function(e){return{type:o.N9,payload:e}}},97704:(e,t,n)=>{n.d(t,{YF:()=>u,bw:()=>l,CM:()=>d,BD:()=>p,Pw:()=>f,af:()=>h,jw:()=>g,dv:()=>v,lX:()=>m,$n:()=>y,K0:()=>b,OW:()=>O});var r=n(93324),o=n(4942),a=n(7739),c=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u="SAP ID (SID)",l={scope:"insights",tags:{isLoaded:!1,items:[],count:0,total:0},sid:{isLoaded:!1,items:[],count:0,total:0},workloads:{isLoaded:!1,items:[],count:0,total:0,hasSap:0}};function d(e,t){var n=t.payload;return s(s({},e),{},{tags:{isLoaded:!0,items:Object.entries(c()((null==n?void 0:n.results)||[],(function(e){return e.tag.namespace}))).map((function(e){var t=(0,r.Z)(e,2);return{name:t[0],tags:t[1]}})),total:null==n?void 0:n.total,count:null==n?void 0:n.count,page:null==n?void 0:n.page,perPage:null==n?void 0:n.per_page}})}function p(e){return s(s({},e),{},{tags:s(s({},e.tags),{},{isLoaded:!1})})}function f(e,t){var n=t.payload;return s(s({},e),{},{scope:n})}function h(e,t){var n=t.payload;return s(s({},e),{},{globalFilterHidden:n.isHidden})}function g(e,t){var n=t.payload;return s(s({},e),{},{selectedTags:n})}function v(e,t){var n=t.payload;return s(s({},e),{},{sid:s(s({isLoaded:!0},(null==n?void 0:n.total)>0&&{items:[{name:u,tags:((null==n?void 0:n.results)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.count;return{tag:{key:t,namespace:u},count:n}}))}]}),{},{total:null==n?void 0:n.total,count:null==n?void 0:n.count,page:null==n?void 0:n.page,perPage:null==n?void 0:n.per_page})})}function m(e){return s(s({},e),{},{sid:s(s({},e.sid),{},{isLoaded:!1})})}function y(e,t){var n,r,o,a,c=t.payload,i=(null==c||null===(n=c.results)||void 0===n||null===(r=n.find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t})))||void 0===r?void 0:r.count)||0;return s(s({},e),{},{workloads:{isLoaded:!0,count:i,total:i,hasSap:(null==c||null===(o=c.results)||void 0===o||null===(a=o.find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t})))||void 0===a?void 0:a.count)||0}})}function b(e){return s(s({},e),{},{workloads:s(s({},e.workloads),{},{isLoaded:!1})})}function O(e,t){var n=t.payload;return s(s({},e),{},{globalFilterRemoved:n.isHidden})}},43541:(e,t,n)=>{n.d(t,{Z:()=>p});var r,o,a=n(4942),c=n(18546),i=n(97852),s=n(97704),u=n(60206),l=(r={},(0,a.Z)(r,u.v_,i.At),(0,a.Z)(r,u.bc,i.t),(0,a.Z)(r,u.aB,i.cb),(0,a.Z)(r,u.Jx,i.Zd),(0,a.Z)(r,u.oY,i.z0),(0,a.Z)(r,u.RL,i.xh),(0,a.Z)(r,u.Ei,i._3),(0,a.Z)(r,u.Sz,i.Bx),(0,a.Z)(r,u.Of,i.SL),(0,a.Z)(r,u.nN,i.Pb),(0,a.Z)(r,u.uN,i.yI),(0,a.Z)(r,u.Wu,i.KZ),(0,a.Z)(r,u.yH,i.fm),(0,a.Z)(r,u.OT,i.s6),(0,a.Z)(r,u.N9,i._Z),r),d=(o={},(0,a.Z)(o,"".concat(u.EI,"_FULFILLED"),s.CM),(0,a.Z)(o,"".concat(u.EI,"_PENDING"),s.BD),(0,a.Z)(o,"".concat(u.vj,"_FULFILLED"),s.dv),(0,a.Z)(o,"".concat(u.vj,"_PENDING"),s.lX),(0,a.Z)(o,"".concat(u.Fi,"_FULFILLED"),s.$n),(0,a.Z)(o,"".concat(u.Fi,"_PENDING"),s.K0),(0,a.Z)(o,u.gn,s.Pw),(0,a.Z)(o,u.aZ,s.af),(0,a.Z)(o,u.YE,s.OW),(0,a.Z)(o,u.n6,s.jw),o);function p(){return{chrome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navigation:{},accessRequests:{count:0,data:[]}},t=arguments.length>1?arguments[1]:void 0;return(0,c.Gg)(l)(e,t)},globalFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.bw,t=arguments.length>1?arguments[1]:void 0;return(0,c.Gg)(d)(e,t)}}}},97852:(e,t,n)=>{n.d(t,{xh:()=>u,At:()=>l,t:()=>d,cb:()=>p,Zd:()=>f,z0:()=>h,_3:()=>g,Bx:()=>v,SL:()=>m,Pb:()=>y,yI:()=>b,KZ:()=>O,fm:()=>k,s6:()=>w,_Z:()=>j});var r=n(93324),o=n(4942),a=n(98670),c=n(74624);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){return e=s(s({},e),{},{contextSwitcherOpen:!e.contextSwitcherOpen})}function l(e,t){var n=t.payload;return s(s({},e),{},{activeApp:n.id})}function d(e,t){var n=t.payload;return s(s({},e),{},{user:n})}function p(e,t){var n=t.payload;return s(s({},e),{},{pageAction:n})}function f(e,t){var n=t.payload;return s(s({},e),{},{pageObjectId:n})}function h(e,t){var n=t.payload;return e.modules[n.module]?e:s(s({},e),{},{modules:s(s({},e.modules),{},(0,o.Z)({},n.module,{manifestLocation:n.manifestLocation||n.manifest}))})}function g(e,t){var n=t.payload;return s(s({},e),{},{navigation:s(s({},e.navigation),{},{landingPage:n})})}function v(e,t){var n=t.payload,r=n.segment,a=n.schema;return s(s({},e),{},{navigation:s(s({},e.navigation),{},(0,o.Z)({},r,a))})}function m(e,t){var n=t.payload.schema,a=Object.entries(n).reduce((function(e,t){var n=(0,r.Z)(t,2),a=n[0],i=n[1];return s(s({},e),{},(0,o.Z)({},a,{name:a,module:"".concat(a,"#./RootApp"),manifestLocation:"".concat(window.location.origin).concat((0,c.hN)()?"/beta":"").concat(i.manifestLocation)}))}),{chrome:{name:"chrome",manifestLocation:"".concat(window.location.origin).concat((0,c.hN)()?"/beta":"","/apps/chrome/js/fed-mods.json")}});return s(s({},e),{},{modules:n,scalprumConfig:a})}function y(e,t){var n=t.payload;return s(s({},e),{},{activeModule:n,appId:n})}function b(e,t){var n=t.payload;return s(s({},e),{},{usePendoFeedback:n})}function O(e,t){var n=t.payload;return s(s({},e),{},{isFeedbackModalOpen:n})}function k(e,t){var n=t.payload,r=n.count,o=n.data.map((function(t){var n,r=t.request_id,o=t.created,a=t.seen;return{request_id:r,created:o,seen:!0===a||!(null===(n=e.accessRequests.data.find((function(e){return r===e.request_id})))||void 0===n||!n.seen)||!1}}));return localStorage.setItem(a.F1,o.length),localStorage.setItem(a.bS,JSON.stringify(o)),s(s({},e),{},{accessRequests:s(s({},e.accessRequests),{},{count:r,hasUnseen:o.length>0,data:o})})}function w(e,t){var n=t.payload,r=e.accessRequests.data.map((function(e){return e.request_id===n?s(s({},e),{},{seen:!0}):e}));return localStorage.setItem(a.bS,JSON.stringify(r)),s(s({},e),{},{accessRequests:s(s({},e.accessRequests),{},{hasUnseen:r.length>0,data:r})})}function j(e,t){var n=t.payload,r="string"==typeof n?n.replace(/^#/,""):void 0;return s(s({},e),{},{initialHash:r})}},74624:(e,t,n)=>{n.d(t,{iB:()=>c,$s:()=>i,hM:()=>s,gB:()=>u,Qn:()=>l,h4:()=>d,hN:()=>p});n(27361);var r=n(35974),o=n(6993);n(11972);function a(){return window}function c(e){return!!e&&(-1!==e&&("-1"!==e&&Number.isInteger(Number(e))))}function i(){var e=a().location.pathname;return"/"===e||"/beta"===e||"/beta/"===e||0===e.indexOf("/openshift")||0===e.indexOf("/beta/openshift")||0===e.indexOf("/security")||0===e.indexOf("/beta/security")||0===e.indexOf("/application-services")||0===e.indexOf("/beta/application-services")}function s(){var e,t="beta"===(e=a().location.pathname.split("/"))[1]?e[2]||"":e[1];return"insights"===t||"cost-management"===t||"apps"===t||"ansible"===t||"migrations"===t||"subscriptions"===t||"openshift"===t||"settings"===t||"user-preferences"===t||"internal"===t||"application-services"===t}function u(e){e.map((function(e){return localStorage.removeItem(e)}))}function l(e,t){return Object.keys(localStorage).reduce((function(t,n){if(n.includes(e))try{var r;try{r=new Date(JSON.parse(localStorage.getItem(t).expires))}catch(e){r=new Date}var o=JSON.parse(localStorage.getItem(n));return r>=new Date(o.expires)?t:n}catch(e){return t}return t}),t)}function d(e,t){var n=(0,o.F)(e,t);return(0,r.setupCache)({store:n,maxAge:6e5})}function p(){return"beta"===window.location.pathname.split("/")[1]}},6993:(e,t,n)=>{n.d(t,{F:()=>c});n(87757);var r=n(74624),o=n(69483),a=n.n(o);var c=function(e,t){var n=(0,r.Qn)(e,t);return a().createInstance({driver:[a().LOCALSTORAGE],name:(null==n?void 0:n.split("/")[0])||n})}}}]);